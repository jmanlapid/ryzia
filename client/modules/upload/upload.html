<template name="upload">
	<head>
	  <title>Ryzia - Upload Video</title>
	</head>
	<body>
		{{> navbar}}
	  	<div class="container">
			<h1>Submit Video</h1>
			<br>
			<form id="form" class="form-horizontal" method="post" enctype="multipart/form-data">
				<div class="form-group">
					<label for="file" class="col-sm-2 control-label">Video File</label>
					<div class="col-sm-10">
						<input type="file" name="file" id="file" accept="video/*" required>
						<p class="help-block">200MB size upload limit of type .webm .ogv or .mp4</p>
						{{#if url}}
							{{> preview}}
						{{/if}}
					</div>
				</div>
				<div class="form-group">
					<label for="title" class="col-sm-2 control-label">Video Title</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" name="title" id="title" placeholder="Brain Stew" required>
					</div>
				</div>
				<div class="form-group">
					<label for="artist" class="col-sm-2 control-label">Artist Name</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" name="artist" id="artist" placeholder="Green Day" required>
					</div>
				</div>
				<div class="form-group">
					<label for="email" class="col-sm-2 control-label">Email</label>
					<div class="col-sm-10">
						<input type="email" class="form-control" name="email" id="email" placeholder="greenday@example.com" required>
					</div>
				</div>
				<div class="form-group">
					<label for="genres" class="col-sm-2 control-label">Genres</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" name="genres" id="genres" placeholder="rock, alternative rock, alt-rock, progressive">
						<p class="help-block">optional - each genre separated by a comma (,)</p>
					</div>
				</div>
				<div class="form-group">
					<label for="genres" class="col-sm-2 control-label">YouTube Video ID</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" name="youtube_id" id="youtube_id" placeholder="cb8qk0cVTos">
						<p class="help-block">https://www.youtube.com/watch?v=cb8qk0cVTos</p>
					</div>
				</div> 
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-primary">Submit</button>
					</div>
				</div>
			</form>
			{{#if uploading}}
				{{> progressBar}}
			{{/if}}
			<div class="row">
				<h3></h3>
				{{#if uploadSuccess}}
					<div class="alert alert-success" role="alert">
					<strong>Upload Successful! </strong>
					Your video is being reviewed. If it is approved it will be publicy viewable otherwise it is deleted. You will receive an email either way.
					</div>
				{{/if}}
				{{#if uploadFailure}}
					<div class="alert alert-danger" role="alert">
						<strong>Upload Failed! </strong>
						Your upload failed! Please try again and make sure you have a stable internet connection.
					</div>
				{{/if}}
			</div>
	  	</div>
	</body>
</template>

<template name="preview">
	<video id="player" width="400" controls>
  		<source src="{{url}}" type="{{type}}">
  	Your browser does not support HTML5 video.
	</video>
</template>

<template name="progressBar">
  <div class="progress">
    <div class="progress-bar" role="progressbar progress-bar-striped active" aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%;">
      <span class="sr-only">{{progress}}% Complete</span>
    </div>
  </div>
</template>